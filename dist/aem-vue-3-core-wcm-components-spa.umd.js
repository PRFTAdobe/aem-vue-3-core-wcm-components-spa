(function(r,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("aem-vue-3-editable-components"),require("@adobe/aem-spa-page-model-manager")):typeof define=="function"&&define.amd?define(["exports","vue","aem-vue-3-editable-components","@adobe/aem-spa-page-model-manager"],e):(r=typeof globalThis<"u"?globalThis:r||self,e(r.aemVueCoreWcmComponentsSpa={},r.Vue,r.AemVueEditableComponents,r.AemSpaPageModelManager))})(this,function(r,e,d,A){"use strict";const D={emptyLabel:"Accordion",isEmpty(s){return!s.cqItemsOrder||(s==null?void 0:s.cqItemsOrder.length)===0}},M={emptyLabel:"Carousel",isEmpty(s){return!s.cqItemsOrder||(s==null?void 0:s.cqItemsOrder.length)===0}},L={emptyLabel:"Container",isEmpty(s){return!s.cqItemsOrder||(s==null?void 0:s.cqItemsOrder.length)===0}},R={emptyLabel:"Experience Fragment",isEmpty(s){return!s.cqItemsOrder||(s==null?void 0:s.cqItemsOrder.length)===0}},V=e.defineComponent({inheritAttrs:!1,__name:"CoreContainer",props:{accessibilityLabel:{type:String},backgroundStyle:{type:String},cqPath:{type:String,default:""},isInEditor:{type:Boolean,default:void 0},layout:{type:String,default:"RESPONSIVE_GRID",validator:s=>["RESPONSIVE_GRID","SIMPLE"].includes(s)},roleAttribute:{type:String},styleSystemElement:{type:String,default:"div"},...d.componentProperties("cmp-container")},setup(s){const t=s,i=e.useAttrs(),_=typeof t.isInEditor<"u"?t.isInEditor:e.inject("isInEditor",A.AuthoringUtils.isInEditor()),k=e.computed(()=>d.componentClassNames(t.baseCssClass,t.appliedCssClassNames,t.cssClassNames,t.containerProps,_,t.aemNoDecoration)),g=e.computed(()=>{var C;return _&&(i==null?void 0:i.allowedComponents)&&((C=i==null?void 0:i.allowedComponents)==null?void 0:C.applicable)});return(C,m)=>g.value?(e.openBlock(),e.createBlock(e.unref(d.AllowedComponentsContainer),e.normalizeProps(e.mergeProps({key:0},{...t,...e.unref(i)})),null,16)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.styleSystemElement||"div"),{key:1,id:t.id,"aria-label":t.accessibilityLabel,class:e.normalizeClass(k.value),role:t.roleAttribute,style:e.normalizeStyle(t.backgroundStyle)},{default:e.withCtx(()=>[s.layout==="RESPONSIVE_GRID"?(e.openBlock(),e.createBlock(e.unref(d.ResponsiveGrid),e.normalizeProps(e.mergeProps({key:0},{...t,...e.unref(i),allowedComponents:{applicable:!1,components:[]},title:""})),null,16)):(e.openBlock(),e.createBlock(e.unref(d.Container),e.normalizeProps(e.mergeProps({key:1},{...t,...e.unref(i)})),null,16))]),_:1},8,["id","aria-label","class","role","style"]))}}),j=["id","data-cmp-single-expansion"],F=["id","data-cmp-expanded"],G=["id","aria-controls","data-cmp-button-id","onClick","onKeydown"],U=[e.createElementVNode("svg",{fill:"var(--accordion-heading-color)",height:"18",viewBox:"0 0 24 24",width:"18",xmlns:"http://www.w3.org/2000/svg"},[e.createElementVNode("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})],-1)],T=["id","aria-labelledby"],H=e.defineComponent({inheritAttrs:!1,__name:"CoreAccordion",props:{cqItems:{type:Object},cqItemsOrder:{type:Array},cqPath:{type:String,default:""},expandedItems:{type:Array,default:()=>[]},headingElement:{type:String,default:"h3"},...d.componentProperties("cmp-accordion")},setup(s){const t=s,i=e.useAttrs(),_=e.inject("isInEditor",A.AuthoringUtils.isInEditor()),k=e.inject("componentMapping",new d.ComponentMapping),g=(()=>{try{return typeof window<"u"}catch{return!1}})(),C=e.ref(null),m=e.ref(-1),p=e.ref(t.expandedItems),f=e.ref(null),N=e.computed(()=>(i==null?void 0:i.singleExpansion)===!0);g&&window.Granite&&window.Granite.author&&window.Granite.author.MessageChannel&&(C.value=new window.Granite.author.MessageChannel("cqauthor",window));const $=e.computed(()=>{const a={};return _&&(a["data-panelcontainer"]="accordion",a["data-cq-data-path"]=t.cqPath||"",a["data-placeholder-text"]="Please drag Accordion item components here"),a}),B=(a,o=t.cqPath)=>{a.data&&a.data.id===o&&a.data.operation==="navigate"&&(m.value=a.data.index)},S=e.computed(()=>d.Utils.getChildComponents(t.cqPath,t.cqItems,t.cqItemsOrder,!0,()=>({}),!1,k)),z=e.computed(()=>d.componentClassNames(t.baseCssClass,t.appliedCssClassNames,t.cssClassNames,t.containerProps,_,t.aemNoDecoration)),u=a=>{const o=f.value.querySelector(`button[data-cmp-button-id="${a}"]`);o&&o.focus()},P=(a,o)=>{const n=p.value.indexOf(a)>-1;if(N.value)p.value=n?[]:[a];else if(n){const b=p.value.indexOf(a);p.value.splice(b,1)}else p.value.push(a);o.target.focus()},x=(a,o,n)=>{const b=f.value.querySelectorAll("button").length-1;switch(o.code){case"ArrowLeft":case"ArrowUp":o.preventDefault(),n>0&&u(n-1);break;case"ArrowRight":case"ArrowDown":o.preventDefault(),n<b&&u(n+1);break;case"Home":o.preventDefault(),u(0);break;case"End":o.preventDefault(),u(b);break;case"Enter":case"Space":o.preventDefault(),P(a,o),u(n);break}},E=a=>p.value.indexOf(a)>-1,O=e.computed(()=>({cqPath:t.cqPath,placeholderClassNames:["new","section"].join(" ")}));return e.watch(N,async(a,o)=>{a!==o&&(p.value=t.expandedItems)}),e.watch(t.expandedItems,async(a,o)=>{a!==o&&(p.value=a)}),e.watch(m,async(a,o)=>{a!==-1&&typeof a<"u"&&a!==o&&t.cqItemsOrder&&(p.value=[t.cqItemsOrder[a]])}),e.onMounted(()=>{C.value&&C.value.subscribeRequestMessage("cmp.panelcontainer",B)}),e.onUnmounted(()=>{C.value&&C.value.unsubscribeRequestMessage("cmp.panelcontainer",B)}),(a,o)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({id:t.id,ref_key:"accordion",ref:f,class:z.value,"data-cmp-single-expansion":N.value===!0?!0:void 0},$.value),[t.cqItemsOrder&&(t==null?void 0:t.cqItemsOrder.length)>0&&t.cqItems?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(t.cqItemsOrder,(n,b)=>(e.openBlock(),e.createElementBlock("div",{id:`accordion-${t.cqItems[n].id}`,key:`accordion-index-${b}`,class:e.normalizeClass(`${t.baseCssClass}__item`),"data-cmp-expanded":E(n)?!0:void 0},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.headingElement),{class:e.normalizeClass(`${t.baseCssClass}__heading`)},{default:e.withCtx(()=>[e.createElementVNode("button",{id:`accordion-${t.cqItems[n].id}-button`,"aria-controls":`accordion-${t.cqItems[n].id}-panel`,class:e.normalizeClass([`${t.baseCssClass}__button`,{[`${t.baseCssClass}__button--expanded`]:E(n)}]),"data-cmp-button-id":b,onClick:q=>P(n,q),onKeydown:q=>x(n,q,b)},[e.createElementVNode("span",{class:e.normalizeClass(`${t.baseCssClass}__title`)},e.toDisplayString(t.cqItems[n]["cq:panelTitle"]),3),e.createElementVNode("span",{class:e.normalizeClass(`${t.baseCssClass}__icon`)},U,2)],42,G)]),_:2},1032,["class"])),e.unref(_)||E(n)?(e.openBlock(),e.createElementBlock("div",{key:0,id:`accordion-${t.cqItems[n].id}-panel`,"aria-labelledby":`accordion-${t.cqItems[n].id}-button`,class:e.normalizeClass(`${t.baseCssClass}__panel ${E(n)?" "+t.baseCssClass+"__panel--expanded":" "+t.baseCssClass+"__panel--hidden"}`),role:"region"},[t.cqItemsOrder?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(S.value[s.cqItemsOrder.indexOf(n)]),{key:0})):e.createCommentVNode("",!0)],10,T)):e.createCommentVNode("",!0)],10,F))),128)):e.createCommentVNode("",!0),e.unref(_)?(e.openBlock(),e.createBlock(e.unref(d.ContainerPlaceholder),e.normalizeProps(e.mergeProps({key:1},O.value)),null,16)):e.createCommentVNode("",!0)],16,j))}}),re="",W=["id","aria-label"],J=["aria-label"],K=["aria-label"],Q=[e.createElementVNode("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e.createElementVNode("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"})],-1)],X=["aria-label"],Y=[e.createElementVNode("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e.createElementVNode("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})],-1)],Z=["aria-label"],v=[e.createElementVNode("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e.createElementVNode("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})],-1)],ee=["aria-label"],te=[e.createElementVNode("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e.createElementVNode("path",{d:"M8 5v14l11-7z"})],-1)],ae=["aria-label"],se=["aria-label","onClick"],ne=e.defineComponent({inheritAttrs:!1,__name:"CoreCarousel",props:{accessibility:{type:Object,default:()=>({play:"Play",pause:"Pause",next:"Next",previous:"Previous",slide:"Slide {0} of {1}",indicator:"Slide {0}",indicators:"Choose a slide to display"})},accessibilityLabel:{type:String,default:"Carousel"},autopauseDisabled:{type:Boolean,default:!1},cqItems:{type:Object},cqItemsOrder:{type:Array},cqPath:{type:String,default:""},delay:{type:Number,default:5e3},isInEditor:{type:Boolean,default:void 0},...d.componentProperties("cmp-carousel")},setup(s){const t=s,i=e.useAttrs(),_=typeof t.isInEditor<"u"?t.isInEditor:e.inject("isInEditor",A.AuthoringUtils.isInEditor()),k=e.inject("componentMapping",new d.ComponentMapping);let g=-1;const C=e.ref(-1),m=e.ref(0),p=e.ref(null),f=e.ref((i==null?void 0:i.autoplay)===!0&&!_);(()=>{try{return typeof window<"u"}catch{return!1}})()&&window.Granite&&window.Granite.author&&window.Granite.author.MessageChannel&&(p.value=new window.Granite.author.MessageChannel("cqauthor",window));const $=(l,c=t.cqPath)=>{l.data&&l.data.id===c&&l.data.operation==="navigate"&&(C.value=l.data.index)},B=e.computed(()=>d.Utils.getChildComponents(t.cqPath,t.cqItems,t.cqItemsOrder,!0,()=>({}),!1,k)),S=e.computed(()=>d.componentClassNames(t.baseCssClass,t.appliedCssClassNames,t.cssClassNames,t.containerProps,_,t.aemNoDecoration)),z=e.computed(()=>({cqPath:t.cqPath,placeholderClassNames:["new","section"].join(" ")})),u=l=>{var w;let c=((w=t.accessibility)==null?void 0:w.indicator)||"";const I="{0}";return c=c.replace(I,(l+1).toString()),c},P=l=>{var h;let c=((h=t.accessibility)==null?void 0:h.slide)||"";const I="{0}";c=c.replace(I,(l+1).toString());const w="{1}";return c=c.replace(w,t.cqItemsOrder.length.toString()),c},x=()=>{m.value===t.cqItemsOrder.length-1?m.value=0:m.value+=1},E=()=>{m.value===0?m.value=t.cqItemsOrder.length-1:m.value-=1},O=()=>{!f.value||t.cqItemsOrder.length<=1||x()},a=()=>{g=window.setInterval(()=>{O()},t.delay)},o=()=>{window.clearInterval(g)},n=l=>{f.value=l},b=l=>{m.value!==l&&(m.value=l)},q=()=>{!t.autopauseDisabled&&f.value&&o()},le=()=>{!t.autopauseDisabled&&f.value&&a()},ie=e.computed(()=>!t.cqItemsOrder||(t==null?void 0:t.cqItemsOrder.length)===0);return e.watch(C,async(l,c)=>{l!==-1&&typeof l<"u"&&l!==c&&(m.value=l,f.value=!1)}),e.onMounted(()=>{a(),p.value&&p.value.subscribeRequestMessage("cmp.panelcontainer",$)}),e.onUnmounted(()=>{g>=0&&o(),p.value&&p.value.unsubscribeRequestMessage("cmp.panelcontainer",$)}),(l,c)=>{var I,w;return e.openBlock(),e.createElementBlock("div",{id:t.id,"aria-label":t.accessibilityLabel,class:e.normalizeClass(S.value),"aria-roledescription":"carousel","data-panelcontainer":"carousel",role:"group"},[ie.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(`${t.baseCssClass}__content`),onMouseenter:q,onMouseleave:le},[e.createElementVNode("div",{class:e.normalizeClass(`${t.baseCssClass}__items`)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(B.value,(h,y)=>(e.openBlock(),e.createElementBlock("div",{key:`item-${y}`,"aria-label":P(y),class:e.normalizeClass([`${t.baseCssClass}__item`,{[`${t.baseCssClass}__item--active`]:y===m.value}]),"data-cmp-hook-carousel":"item",role:"tabpanel"},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(h)))],10,J))),128))],2),e.createElementVNode("div",{class:e.normalizeClass(`${t.baseCssClass}__actions`)},[e.createElementVNode("button",{"aria-label":t.accessibility.previous,class:e.normalizeClass(`${t.baseCssClass}__action ${t.baseCssClass}__action--previous`),type:"button",onClick:E},[e.createElementVNode("span",{class:e.normalizeClass(`${t.baseCssClass}__action-icon`)},Q,2),e.createElementVNode("span",{class:e.normalizeClass(`${t.baseCssClass}__action-text`)},e.toDisplayString(t.accessibility.previous),3)],10,K),e.createElementVNode("button",{"aria-label":t.accessibility.next,class:e.normalizeClass(`${t.baseCssClass}__action ${t.baseCssClass}__action--next`),type:"button",onClick:x},[e.createElementVNode("span",{class:e.normalizeClass(`${t.baseCssClass}__action-icon`)},Y,2),e.createElementVNode("span",{class:e.normalizeClass(`${t.baseCssClass}__action-text`)},e.toDisplayString(t.accessibility.next),3)],10,X),((I=e.unref(i))==null?void 0:I.autoplay)===!0?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("button",{"aria-label":t.accessibility.pause,class:e.normalizeClass([`${t.baseCssClass}__action`,`${t.baseCssClass}__action--pause`,{[`${t.baseCssClass}__action--disabled`]:!f.value}]),type:"button",onClick:c[0]||(c[0]=h=>n(!1))},[e.createElementVNode("span",{class:e.normalizeClass(`${t.baseCssClass}__action-icon`)},v,2),e.createElementVNode("span",{class:e.normalizeClass(`${t.baseCssClass}__action-text`)},e.toDisplayString(t.accessibility.pause),3)],10,Z),e.createElementVNode("button",{"aria-label":t.accessibility.play,class:e.normalizeClass([`${t.baseCssClass}__action`,`${t.baseCssClass}__action--play`,{[`${t.baseCssClass}__action--disabled`]:f.value}]),type:"button",onClick:c[1]||(c[1]=h=>n(!0))},[e.createElementVNode("span",{class:e.normalizeClass(`${t.baseCssClass}__action-icon`)},te,2),e.createElementVNode("span",{class:e.normalizeClass(`${t.baseCssClass}__action-text`)},e.toDisplayString(t.accessibility.play),3)],10,ee)],64)):e.createCommentVNode("",!0)],2),e.createElementVNode("ol",{"aria-label":(w=t.accessibility)==null?void 0:w.indicators,class:e.normalizeClass(`${t.baseCssClass}__indicators`),role:"tablist"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.cqItemsOrder,(h,y)=>(e.openBlock(),e.createElementBlock("li",{key:`item-${y}`,"aria-label":u(y),class:e.normalizeClass([`${t.baseCssClass}__indicator`,{[`${t.baseCssClass}__indicator--active`]:y===m.value}]),role:"tab",onClick:be=>b(y)},e.toDisplayString(t.cqItems[h]["cq:panelTitle"]),11,se))),128))],10,ae)],34)),e.unref(_)?(e.openBlock(),e.createBlock(e.unref(d.ContainerPlaceholder),e.normalizeProps(e.mergeProps({key:1},z.value)),null,16)):e.createCommentVNode("",!0)],10,W)}}}),_e="",oe=e.defineComponent({__name:"CoreExperienceFragment",setup(s){return(t,i)=>(e.openBlock(),e.createBlock(V,{"is-in-editor":!1}))}}),fe="";r.AccordionEditConfig=D,r.CarouselEditConfig=M,r.ContainerEditConfig=L,r.CoreAccordion=H,r.CoreCarousel=ne,r.CoreContainer=V,r.CoreExperienceFragment=oe,r.ExperienceFragmentEditConfig=R,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
