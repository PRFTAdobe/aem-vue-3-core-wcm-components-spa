{"version":3,"file":"index.es.mjs","sources":["../src/ruleName.js","../src/messages.js","../src/helpers/validateRuleWithProps.js","../src/helpers/walk.js","../src/helpers/index.js","../src/maps.js","../src/handlers/handleNonStandardProperties.js","../src/handlers/handle4Properties.js","../src/handlers/handle2Properties.js","../src/handlers/handleProperty.js","../src/handlers/handleValue.js","../src/plugin.js","../src/index.js"],"sourcesContent":["export default 'stylelint-logical-properties/enforce-logical-properties';\n","import stylelint from 'stylelint';\nimport ruleName from './ruleName';\n\nexport const messages = stylelint.utils.ruleMessages(ruleName, {\n  unexpectedProp(physicalProperty, logicalProperty) {\n    return `Unexpected \"${physicalProperty}\" property. Use \"${logicalProperty}\".`;\n  },\n  unexpectedValue(property, physicalValue, logicalValue) {\n    return `Unexpected \"${physicalValue}\" value in \"${property}\" property. Use \"${logicalValue}\".`;\n  },\n  unsupportedProp(physicalProperty, logicalProperty) {\n    return `\"${physicalProperty}\" is not part of CSS specs. Use \"${logicalProperty[0]}\" and \"${logicalProperty[1]}\".`;\n  },\n});\n","export const validateRuleWithProps = (root, props, fn) => {\n  // conditionally walk nodes with children\n  if (root.nodes && root.nodes.length) {\n    const args = [];\n\n    const hasProps = props.every((prop) => {\n      const declIndex = root.nodes.findIndex((child) => child.type === 'decl' && child.prop === prop);\n      const decl = root.nodes[declIndex];\n\n      if (decl) {\n        args.push(decl, declIndex);\n      }\n\n      return decl;\n    });\n\n    if (hasProps) {\n      fn(...args);\n    }\n  }\n};\n","const dirSelectorRegExp = /:dir\\(ltr|rtl\\)/i;\nconst isDirRule = (node) => node.type === 'rule' && dirSelectorRegExp.test(node.selector);\n\n// walk all container nodes\nexport const walk = (node, fn) => {\n  if (node.nodes && node.nodes.length) {\n    const nodes = node.nodes.slice();\n    const { length } = nodes;\n    let index = -1;\n\n    // eslint-disable-next-line no-plusplus\n    while (++index < length) {\n      const child = nodes[index];\n\n      if (!isDirRule(child)) {\n        fn(child);\n\n        walk(child, fn);\n      }\n    }\n  }\n};\n","import stylelint from 'stylelint';\nimport { messages } from '../messages';\nimport ruleName from '../ruleName';\n\nexport const isMethodIndifferent = (method) => method === 'ignore' || method === false || method === null;\n\nexport const isMethodAlways = (method) => method === 'always' || method === true;\n\nexport const isContextAutofixing = (context) => Boolean(Object(context).fix);\n\nexport const isNodeMatchingDecl = (decl, regexp) => decl.type === 'decl' && regexp.test(decl.prop);\n\nexport const isDeclAnException = (decl, propExceptions) => propExceptions\n  .some((match) => (match instanceof RegExp\n    ? match.test(decl.prop)\n    : String(match || '').toLowerCase() === String(decl.prop || '').toLowerCase()));\n\nexport const isDeclReported = (decl, reportedDecls) => reportedDecls.has(decl);\n\nexport const createReporters = (result) => ({\n  reportUnexpectedProperty: (decl, logicalProperty) => stylelint.utils.report({\n    message: messages.unexpectedProp(decl.prop, logicalProperty),\n    node: decl,\n    result,\n    ruleName,\n  }),\n  reportUnsupportedProp: (decl, logicalProperty) => stylelint.utils.report({\n    message: messages.unsupportedProp(decl.prop, logicalProperty),\n    node: decl,\n    result,\n    ruleName,\n  }),\n  reportUnexpectedValue: (node, value) => stylelint.utils.report({\n    message: messages.unexpectedValue(node.prop, node.value, value),\n    node,\n    result,\n    ruleName,\n  }),\n});\n\nexport { validateRuleWithProps } from './validateRuleWithProps';\n\nexport { walk } from './walk';\n","const inline = {\n  start: { ltr: 'left', rtl: 'right' },\n  end: { ltr: 'right', rtl: 'left' },\n};\n\nexport const physical4Prop = [\n  [['top', 'left', 'bottom', 'right'], 'inset'],\n  [['margin-top', 'margin-right', 'margin-bottom', 'margin-left'], ['margin-block', 'margin-inline']],\n  [['padding-top', 'padding-right', 'padding-bottom', 'padding-left'], ['padding-block', 'padding-inline']],\n];\n\nexport const physical2Prop = [\n  [['top', 'bottom'], 'inset-block'],\n  [['left', 'right'], 'inset-inline'],\n\n  [['margin-top', 'margin-bottom'], 'margin-block'],\n  [['margin-left', 'margin-right'], 'margin-inline'],\n\n  [['padding-top', 'padding-bottom'], 'padding-block'],\n  [['padding-left', 'padding-right'], 'padding-inline'],\n];\n\nexport const physicalProp = (dir) => [\n  [['margin-top'], 'margin-block-start'],\n  [['margin-bottom'], 'margin-block-end'],\n  [[`margin-${inline.start[dir]}`], 'margin-inline-start'],\n  [[`margin-${inline.end[dir]}`], 'margin-inline-end'],\n  [['margin'], ['margin-block', 'margin-inline']],\n\n  [['padding-top'], 'padding-block-start'],\n  [['padding-bottom'], 'padding-block-end'],\n  [[`padding-${inline.start[dir]}`], 'padding-inline-start'],\n  [[`padding-${inline.end[dir]}`], 'padding-inline-end'],\n  [['padding'], ['padding-block', 'padding-inline']],\n\n  [['top'], 'inset-block-start'],\n  [['bottom'], 'inset-block-end'],\n  [[inline.start[dir]], 'inset-inline-start'],\n  [[inline.end[dir]], 'inset-inline-end'],\n\n  // border\n  [['border-top'], 'border-block-start'],\n  [['border-bottom'], 'border-block-end'],\n  [[`border-${inline.start[dir]}`], 'border-inline-start'],\n  [[`border-${inline.end[dir]}`], 'border-inline-end'],\n\n  [['border-top-color'], 'border-block-start-color'],\n  [['border-top-style'], 'border-block-start-style'],\n  [['border-top-width'], 'border-block-start-width'],\n  [['border-bottom-color'], 'border-block-end-color'],\n  [['border-bottom-style'], 'border-block-end-style'],\n  [['border-bottom-width'], 'border-block-end-width'],\n\n  [[`border-${inline.start[dir]}-color`], 'border-inline-start-color'],\n  [[`border-${inline.start[dir]}-style`], 'border-inline-start-style'],\n  [[`border-${inline.start[dir]}-width`], 'border-inline-start-width'],\n  [[`border-${inline.end[dir]}-color`], 'border-inline-end-color'],\n  [[`border-${inline.end[dir]}-style`], 'border-inline-end-style'],\n  [[`border-${inline.end[dir]}-width`], 'border-inline-end-width'],\n\n  [[`border-top-${inline.start[dir]}-radius`], 'border-start-start-radius'],\n  [[`border-bottom-${inline.start[dir]}-radius`], 'border-end-start-radius'],\n  [[`border-top-${inline.end[dir]}-radius`], 'border-start-end-radius'],\n  [[`border-bottom-${inline.end[dir]}-radius`], 'border-end-end-radius'],\n\n  [['height'], 'block-size'],\n  [['min-height'], 'min-block-size'],\n  [['max-height'], 'max-block-size'],\n\n  [['width'], 'inline-size'],\n  [['min-width'], 'min-inline-size'],\n  [['max-width'], 'max-inline-size'],\n];\n\nexport const physicalValue = (dir) => [\n  [/^clear$/i, {\n    [inline.start[dir]]: 'inline-start',\n    [inline.end[dir]]: 'inline-end',\n  }],\n  [/^float$/i, {\n    [inline.start[dir]]: 'inline-start',\n    [inline.end[dir]]: 'inline-end',\n  }],\n  [/^text-align$/i, {\n    [inline.start[dir]]: 'start',\n    [inline.end[dir]]: 'end',\n  }],\n];\n\nexport const migrationNoneSpec = [\n  [['margin-start'], ['margin-block-start', 'margin-inline-start']],\n  [['margin-end'], ['margin-block-end', 'margin-inline-end']],\n\n  [['padding-start'], ['padding-block-start', 'padding-inline-start']],\n  [['padding-end'], ['padding-block-end', 'padding-inline-end']],\n\n  [['inset-start'], ['inset-inline-start', 'inset-block-start']],\n  [['inset-end'], ['inset-inline-end', 'inset-block-end']],\n];\n","import { migrationNoneSpec } from '../maps';\nimport { validateRuleWithProps, isDeclReported } from '../helpers';\n\nexport const handleNonStandardProperties = ({\n  node, isAutofix, reportedDecls, reportUnsupportedProp,\n}) => migrationNoneSpec\n  .forEach(([prop, props]) => {\n    validateRuleWithProps(node, prop, (outDateDecl) => {\n      console.warn(`Property ${prop[0]} is not part of Logical standards.`);\n      if (isAutofix) {\n        console.warn(`Migrating ${prop[0]} to Logical standards.`);\n        const { value } = outDateDecl;\n\n        const values = value.split(' ');\n\n        outDateDecl.cloneBefore({\n          prop: props[0],\n          value: values[0],\n        });\n        outDateDecl.cloneAfter({\n          prop: props[1],\n          value: values[1] || values[0],\n        });\n        outDateDecl.remove();\n      } else if (!isDeclReported(outDateDecl, reportedDecls)) {\n        reportUnsupportedProp(outDateDecl, props);\n        reportedDecls.set(outDateDecl);\n      }\n    });\n  });\n","import { physical4Prop } from '../maps';\nimport { validateRuleWithProps, isDeclAnException, isDeclReported } from '../helpers';\n\nexport const handle4Properties = ({\n  node, isAutofix, reportedDecls, propExceptions, reportUnexpectedProperty,\n}) => physical4Prop.forEach(([props, prop]) => {\n  validateRuleWithProps(\n    node,\n    props,\n    (\n      blockStartDecl,\n      blockStartIndex,\n      inlineStartDecl,\n      inlineStartIndex,\n      blockEndDecl,\n      blockEndIndex,\n      inlineEndDecl,\n    ) => {\n      const firstInlineDecl = blockStartDecl;\n      if (\n        !isDeclAnException(blockStartDecl, propExceptions)\n      && !isDeclAnException(inlineStartDecl, propExceptions)\n      && !isDeclAnException(blockEndDecl, propExceptions)\n      && !isDeclAnException(inlineEndDecl, propExceptions)\n      ) {\n        if (isAutofix) {\n          const values = [\n            blockStartDecl.value,\n            inlineStartDecl.value,\n            blockEndDecl.value,\n            inlineEndDecl.value,\n          ];\n\n          if (Array.isArray(prop)) {\n            const [blockStart, inlineEnd, blockEnd, inlineStart] = values;\n            firstInlineDecl.cloneBefore({\n              prop: prop[0],\n              value: [blockStart, blockEnd].join(' '),\n            });\n            firstInlineDecl.cloneBefore({\n              prop: prop[1],\n              value: [inlineStart, inlineEnd].join(' '),\n            });\n          } else {\n            firstInlineDecl.cloneBefore({\n              prop,\n              value: values.join(' '),\n            });\n          }\n\n          blockStartDecl.remove();\n          inlineStartDecl.remove();\n          blockEndDecl.remove();\n          inlineEndDecl.remove();\n        } else if (\n          !isDeclReported(blockStartDecl, reportedDecls)\n        && !isDeclReported(inlineStartDecl, reportedDecls)\n        && !isDeclReported(blockEndDecl, reportedDecls)\n        && !isDeclReported(inlineEndDecl, reportedDecls)\n        ) {\n          reportUnexpectedProperty(firstInlineDecl, prop);\n\n          reportedDecls.set(blockStartDecl);\n          reportedDecls.set(inlineStartDecl);\n          reportedDecls.set(blockEndDecl);\n          reportedDecls.set(inlineEndDecl);\n        }\n      }\n    },\n  );\n});\n","import { physical2Prop } from '../maps';\nimport { validateRuleWithProps, isDeclAnException, isDeclReported } from '../helpers';\n\nexport const handle2Properties = ({\n  node, isAutofix, reportedDecls, propExceptions, reportUnexpectedProperty,\n}) => physical2Prop.forEach(([props, prop]) => {\n  validateRuleWithProps(node, props, (startDecl, startIndex, endDecl, endStartIndex) => {\n    const firstInlineDecl = startIndex < endStartIndex\n      ? startDecl\n      : endDecl;\n\n    if (\n      !isDeclAnException(startDecl, propExceptions)\n      && !isDeclAnException(endDecl, propExceptions)\n    ) {\n      if (isAutofix) {\n        firstInlineDecl.cloneBefore({\n          prop,\n          value: startDecl.value === endDecl.value\n            ? startDecl.value\n            : [startDecl.value, endDecl.value].join(' '),\n        });\n\n        startDecl.remove();\n        endDecl.remove();\n      } else if (\n        !isDeclReported(startDecl, reportedDecls)\n        && !isDeclReported(endDecl, reportedDecls)\n      ) {\n        reportUnexpectedProperty(firstInlineDecl, prop);\n\n        reportedDecls.set(startDecl);\n        reportedDecls.set(endDecl);\n      }\n    }\n  });\n});\n","import { physicalProp } from '../maps';\nimport { validateRuleWithProps, isDeclAnException, isDeclReported } from '../helpers';\n\nexport const handleProperty = ({\n  node, isAutofix, reportedDecls, propExceptions, reportUnexpectedProperty, dir,\n}) => physicalProp(dir).forEach(([props, prop]) => {\n  validateRuleWithProps(node, props, (physicalDecl) => {\n    if (!isDeclAnException(physicalDecl, propExceptions)) {\n      if (isAutofix) {\n        if (Array.isArray(prop)) {\n          const { value } = physicalDecl;\n          const [blockValue, inlineValue] = (() => {\n            const values = value.split(' ');\n            if (values.length === 1) {\n              return [value, value];\n            }\n\n            if (values.length === 2) {\n              const [block, inline] = values;\n              return [block, inline];\n            }\n\n            if (values.length === 3) {\n              const [blockStart, inline, blockEnd] = values;\n              return [[blockStart, blockEnd].join(' '), inline];\n            }\n\n            if (values.length === 4) {\n              const [blockStart, inlineEnd, blockEnd, inlineStart] = values;\n              return [[blockStart, blockEnd].join(' '), [inlineStart, inlineEnd].join(' ')];\n            }\n\n            return [];\n          })();\n\n          physicalDecl.cloneBefore({\n            prop: prop[0],\n            value: blockValue,\n          });\n          physicalDecl.cloneBefore({\n            prop: prop[1],\n            value: inlineValue,\n          });\n\n          physicalDecl.remove();\n\n          return;\n        }\n\n        // eslint-disable-next-line no-param-reassign\n        physicalDecl.prop = prop;\n      } else if (!isDeclReported(physicalDecl, reportedDecls)) {\n        reportUnexpectedProperty(physicalDecl, prop);\n\n        reportedDecls.set(physicalDecl);\n      }\n    }\n  });\n});\n","import { physicalValue } from '../maps';\nimport { isDeclAnException, isNodeMatchingDecl } from '../helpers';\n\nexport const handleValue = ({\n  node, isAutofix, reportedDecls, propExceptions, reportUnexpectedValue, dir,\n}) => physicalValue(dir).forEach(([regexp, props]) => {\n  if (isNodeMatchingDecl(node, regexp) && !isDeclAnException(node, propExceptions)) {\n    const valueKey = node.value.toLowerCase();\n\n    if (valueKey in props) {\n      const value = props[valueKey];\n\n      if (isAutofix) {\n        // eslint-disable-next-line no-param-reassign\n        node.value = value;\n      } else {\n        reportUnexpectedValue(node, value);\n\n        reportedDecls.set(node);\n      }\n    }\n  }\n});\n","import stylelint from 'stylelint';\nimport ruleName from './ruleName';\nimport {\n  createReporters,\n  isContextAutofixing,\n  isMethodAlways,\n  isMethodIndifferent,\n  walk,\n} from './helpers';\nimport {\n  handle2Properties, handle4Properties, handleNonStandardProperties, handleProperty, handleValue,\n} from './handlers';\n\nconst reportedDecls = new WeakMap();\n\nexport const plugin = (method, opts, context) => {\n  const propExceptions = [].concat(Object(opts).except || []);\n  const isAutofix = isContextAutofixing(context);\n  const dir = /^rtl$/i.test(Object(opts).direction) ? 'rtl' : 'ltr';\n\n  return (root, result) => {\n    // validate the method\n    const isMethodValid = stylelint.utils.validateOptions(result, ruleName, {\n      actual: method,\n      possible() {\n        return isMethodIndifferent(method)\n          || isMethodAlways(method);\n      },\n    });\n\n    const {\n      reportUnexpectedProperty,\n      reportUnsupportedProp,\n      reportUnexpectedValue,\n    } = createReporters(result);\n\n    if (isMethodValid && isMethodAlways(method)) {\n      walk(root, (node) => {\n        // MIGRATION from out of date props https://github.com/csstools/stylelint-use-logical/issues/1\n        handleNonStandardProperties({\n          node, isAutofix, reportedDecls, reportUnsupportedProp,\n        });\n\n        // validate or autofix 4 physical properties as logical shorthands\n        handle4Properties({\n          node, isAutofix, reportedDecls, reportUnexpectedProperty, propExceptions,\n        });\n\n        // validate or autofix 2 physical properties as logical shorthands\n        handle2Properties({\n          node, isAutofix, reportedDecls, reportUnexpectedProperty, propExceptions,\n        });\n\n        // validate or autofix physical properties as logical\n        handleProperty({\n          node, isAutofix, reportedDecls, reportUnexpectedProperty, propExceptions, dir,\n        });\n\n        // validate or autofix physical values as logical\n        handleValue({\n          node, isAutofix, reportedDecls, reportUnexpectedValue, propExceptions, dir,\n        });\n      });\n    }\n  };\n};\n","import stylelint from 'stylelint';\nimport ruleName from './ruleName';\nimport { plugin } from './plugin';\n\nexport default stylelint.createPlugin(ruleName, plugin);\n\nexport { ruleName };\n"],"names":["messages","stylelint","utils","ruleMessages","ruleName","unexpectedProp","physicalProperty","logicalProperty","unexpectedValue","property","physicalValue","logicalValue","unsupportedProp","validateRuleWithProps","root","props","fn","nodes","length","args","hasProps","every","prop","declIndex","findIndex","child","type","decl","push","dirSelectorRegExp","isDirRule","node","test","selector","walk","slice","index","isMethodIndifferent","method","isMethodAlways","isContextAutofixing","context","Boolean","Object","fix","isNodeMatchingDecl","regexp","isDeclAnException","propExceptions","some","match","RegExp","String","toLowerCase","isDeclReported","reportedDecls","has","createReporters","result","reportUnexpectedProperty","report","message","reportUnsupportedProp","reportUnexpectedValue","value","inline","start","ltr","rtl","end","physical4Prop","physical2Prop","physicalProp","dir","migrationNoneSpec","handleNonStandardProperties","isAutofix","forEach","outDateDecl","console","warn","values","split","cloneBefore","cloneAfter","remove","set","handle4Properties","blockStartDecl","blockStartIndex","inlineStartDecl","inlineStartIndex","blockEndDecl","blockEndIndex","inlineEndDecl","firstInlineDecl","Array","isArray","blockStart","inlineEnd","blockEnd","inlineStart","join","handle2Properties","startDecl","startIndex","endDecl","endStartIndex","handleProperty","physicalDecl","block","blockValue","inlineValue","handleValue","valueKey","WeakMap","plugin","opts","concat","except","direction","isMethodValid","validateOptions","actual","possible","createPlugin"],"mappings":"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"}